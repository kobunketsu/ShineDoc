<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shine: ACIAPManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Shine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="interface_a_c_i_a_p_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ACIAPManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_a_c_i_a_p_manager_8h_source.html">ACIAPManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ACIAPManager:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_a_c_i_a_p_manager.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:adbab2d8ca86a786ea4acd43cfbd725d1" id="r_adbab2d8ca86a786ea4acd43cfbd725d1"><td class="memItemLeft" align="right" valign="top"><a id="adbab2d8ca86a786ea4acd43cfbd725d1" name="adbab2d8ca86a786ea4acd43cfbd725d1"></a>
(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <b>canMakePurchases</b></td></tr>
<tr class="separator:adbab2d8ca86a786ea4acd43cfbd725d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987fb932930eacc20f6fd5b8fd2bc4b6" id="r_a987fb932930eacc20f6fd5b8fd2bc4b6"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a987fb932930eacc20f6fd5b8fd2bc4b6">hasAnyProduct</a></td></tr>
<tr class="separator:a987fb932930eacc20f6fd5b8fd2bc4b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a959577ba949742c56e2dd3a93b611375" id="r_a959577ba949742c56e2dd3a93b611375"><td class="memItemLeft" align="right" valign="top"><a id="a959577ba949742c56e2dd3a93b611375" name="a959577ba949742c56e2dd3a93b611375"></a>
(NSArray *)&#160;</td><td class="memItemRight" valign="bottom">- <b>products</b></td></tr>
<tr class="memdesc:a959577ba949742c56e2dd3a93b611375"><td class="mdescLeft">&#160;</td><td class="mdescRight">获得产品 <br /></td></tr>
<tr class="separator:a959577ba949742c56e2dd3a93b611375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa522151b938117bdced1abc023828f6f" id="r_aa522151b938117bdced1abc023828f6f"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#aa522151b938117bdced1abc023828f6f">requestProductsWithCompletionHandler:</a></td></tr>
<tr class="separator:aa522151b938117bdced1abc023828f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdca0c44c498f6213e2f24cf520a57af" id="r_afdca0c44c498f6213e2f24cf520a57af"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#afdca0c44c498f6213e2f24cf520a57af">verifyReceiptCompletion:</a></td></tr>
<tr class="separator:afdca0c44c498f6213e2f24cf520a57af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb2d8b4d1c746370cf13f7bacea9c558" id="r_acb2d8b4d1c746370cf13f7bacea9c558"><td class="memItemLeft" align="right" valign="top"><a id="acb2d8b4d1c746370cf13f7bacea9c558" name="acb2d8b4d1c746370cf13f7bacea9c558"></a>
(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <b>isSubscriptionValid:</b></td></tr>
<tr class="separator:acb2d8b4d1c746370cf13f7bacea9c558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a342883837130e8683be2b81768a70c" id="r_a2a342883837130e8683be2b81768a70c"><td class="memItemLeft" align="right" valign="top"><a id="a2a342883837130e8683be2b81768a70c" name="a2a342883837130e8683be2b81768a70c"></a>
(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <b>isExpiredOfProduct:</b></td></tr>
<tr class="separator:a2a342883837130e8683be2b81768a70c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaf9ee63f2200c30eddf80b188d16cb1" id="r_acaf9ee63f2200c30eddf80b188d16cb1"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#acaf9ee63f2200c30eddf80b188d16cb1">hasAnyExpiredSubscription</a></td></tr>
<tr class="memdesc:acaf9ee63f2200c30eddf80b188d16cb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">含有任何过期的订阅  <br /></td></tr>
<tr class="separator:acaf9ee63f2200c30eddf80b188d16cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1bd212c8b05d28c3985a15ee2741dac" id="r_ab1bd212c8b05d28c3985a15ee2741dac"><td class="memItemLeft" align="right" valign="top">(nullable SKProduct *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#ab1bd212c8b05d28c3985a15ee2741dac">productForIAPName:</a></td></tr>
<tr class="separator:ab1bd212c8b05d28c3985a15ee2741dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7452c0e39fbdc48352e72edaaa4237b4" id="r_a7452c0e39fbdc48352e72edaaa4237b4"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a7452c0e39fbdc48352e72edaaa4237b4">purchaseProductIdentifier:</a></td></tr>
<tr class="separator:a7452c0e39fbdc48352e72edaaa4237b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09decf3e03a3a36ed9dcb341f2618693" id="r_a09decf3e03a3a36ed9dcb341f2618693"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a09decf3e03a3a36ed9dcb341f2618693">restorePurchase</a></td></tr>
<tr class="separator:a09decf3e03a3a36ed9dcb341f2618693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875caf94f586015195a6c9f56c8a6669" id="r_a875caf94f586015195a6c9f56c8a6669"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a875caf94f586015195a6c9f56c8a6669">isPurchasedOfProductId:</a></td></tr>
<tr class="separator:a875caf94f586015195a6c9f56c8a6669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0a5c12d62f13268b072728a54361350" id="r_af0a5c12d62f13268b072728a54361350"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#af0a5c12d62f13268b072728a54361350">isFreeOfProductId:</a></td></tr>
<tr class="separator:af0a5c12d62f13268b072728a54361350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4616476b84d8d09342957ae1c8ddeb53" id="r_a4616476b84d8d09342957ae1c8ddeb53"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a4616476b84d8d09342957ae1c8ddeb53">hasDiscountForProductIdentifier:</a></td></tr>
<tr class="separator:a4616476b84d8d09342957ae1c8ddeb53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60af1901b4db163874fe7019cefcc0d7" id="r_a60af1901b4db163874fe7019cefcc0d7"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a60af1901b4db163874fe7019cefcc0d7">isFreeTrialDiscountTypeForProductIdentifier:</a></td></tr>
<tr class="separator:a60af1901b4db163874fe7019cefcc0d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65ca9c7edba89c78555c779e4a80dded" id="r_a65ca9c7edba89c78555c779e4a80dded"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a65ca9c7edba89c78555c779e4a80dded">isInFreeTrialDiscountForProductIdentifier:</a></td></tr>
<tr class="separator:a65ca9c7edba89c78555c779e4a80dded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a201ec5579394b773b4638e72321f755f" id="r_a201ec5579394b773b4638e72321f755f"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a201ec5579394b773b4638e72321f755f">titleOfProductIdentifier:</a></td></tr>
<tr class="separator:a201ec5579394b773b4638e72321f755f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c238cc957e56ebe3715923e2de23387" id="r_a0c238cc957e56ebe3715923e2de23387"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a0c238cc957e56ebe3715923e2de23387">actionTitleOfProductIdentifier:actionType:</a></td></tr>
<tr class="separator:a0c238cc957e56ebe3715923e2de23387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc16cf825e4ca8b3bfb3320e39296db6" id="r_abc16cf825e4ca8b3bfb3320e39296db6"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#abc16cf825e4ca8b3bfb3320e39296db6">dateTitleOfProductIdentifier:</a></td></tr>
<tr class="separator:abc16cf825e4ca8b3bfb3320e39296db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529ebdeaf53bc401f467f3c3f1de5b9a" id="r_a529ebdeaf53bc401f467f3c3f1de5b9a"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a529ebdeaf53bc401f467f3c3f1de5b9a">descOfProductIdentifier:</a></td></tr>
<tr class="separator:a529ebdeaf53bc401f467f3c3f1de5b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd50d2c19722a1477c67977b2819c99" id="r_a6fd50d2c19722a1477c67977b2819c99"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a6fd50d2c19722a1477c67977b2819c99">localPriceOfProductIdentifier:</a></td></tr>
<tr class="separator:a6fd50d2c19722a1477c67977b2819c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a97112114204de9d7ba9262cb92103" id="r_a95a97112114204de9d7ba9262cb92103"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a95a97112114204de9d7ba9262cb92103">titleOfDiscountProductIdentifier:</a></td></tr>
<tr class="separator:a95a97112114204de9d7ba9262cb92103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700f8acf3730b72c4e5948174413126b" id="r_a700f8acf3730b72c4e5948174413126b"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a700f8acf3730b72c4e5948174413126b">localPriceOfDiscountProductIdentifier:</a></td></tr>
<tr class="separator:a700f8acf3730b72c4e5948174413126b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6efba5388f5aa1f786ab2d62b1c3cf7" id="r_ab6efba5388f5aa1f786ab2d62b1c3cf7"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#ab6efba5388f5aa1f786ab2d62b1c3cf7">descOfDiscountProductIdentifier:</a></td></tr>
<tr class="separator:ab6efba5388f5aa1f786ab2d62b1c3cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5dd5613d9064c2fbc85ed47bbc5b10c" id="r_ac5dd5613d9064c2fbc85ed47bbc5b10c"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#ac5dd5613d9064c2fbc85ed47bbc5b10c">titleOfPremiumIdentifier:</a></td></tr>
<tr class="separator:ac5dd5613d9064c2fbc85ed47bbc5b10c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be6913a715872e80a8e422677e65598" id="r_a2be6913a715872e80a8e422677e65598"><td class="memItemLeft" align="right" valign="top">(nullable NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_a_c_i_a_p_manager.html#a2be6913a715872e80a8e422677e65598">logTypeOfProductIdentifier:</a></td></tr>
<tr class="separator:a2be6913a715872e80a8e422677e65598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86b4f58c0a1e32954ba7ce32914ea1fa" id="r_a86b4f58c0a1e32954ba7ce32914ea1fa"><td class="memItemLeft" align="right" valign="top"><a id="a86b4f58c0a1e32954ba7ce32914ea1fa" name="a86b4f58c0a1e32954ba7ce32914ea1fa"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>lockItemId:</b></td></tr>
<tr class="separator:a86b4f58c0a1e32954ba7ce32914ea1fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4988f1c6cdb7ae4c07fd1406c7ffee7" id="r_ae4988f1c6cdb7ae4c07fd1406c7ffee7"><td class="memItemLeft" align="right" valign="top"><a id="ae4988f1c6cdb7ae4c07fd1406c7ffee7" name="ae4988f1c6cdb7ae4c07fd1406c7ffee7"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>unlockItemId:</b></td></tr>
<tr class="separator:ae4988f1c6cdb7ae4c07fd1406c7ffee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a118f90711d32d87de293d64f3208eccf" id="r_a118f90711d32d87de293d64f3208eccf"><td class="memItemLeft" align="right" valign="top"><a id="a118f90711d32d87de293d64f3208eccf" name="a118f90711d32d87de293d64f3208eccf"></a>
(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <b>isUnlockedOfItemId:</b></td></tr>
<tr class="separator:a118f90711d32d87de293d64f3208eccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:aee70800f54c9a29a86e561ca3d618c45" id="r_aee70800f54c9a29a86e561ca3d618c45"><td class="memItemLeft" align="right" valign="top"><a id="aee70800f54c9a29a86e561ca3d618c45" name="aee70800f54c9a29a86e561ca3d618c45"></a>
(<a class="el" href="interface_a_c_i_a_p_manager.html">ACIAPManager</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <b>si</b></td></tr>
<tr class="separator:aee70800f54c9a29a86e561ca3d618c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a3960ef0b0770a3f48fd7669b70cc16a4" id="r_a3960ef0b0770a3f48fd7669b70cc16a4"><td class="memItemLeft" align="right" valign="top"><a id="a3960ef0b0770a3f48fd7669b70cc16a4" name="a3960ef0b0770a3f48fd7669b70cc16a4"></a>
RequestProductsCompletionHandler&#160;</td><td class="memItemRight" valign="bottom"><b>completionHandler</b></td></tr>
<tr class="separator:a3960ef0b0770a3f48fd7669b70cc16a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d9ce20df74626d1f47e2fa981c18a7" id="r_a25d9ce20df74626d1f47e2fa981c18a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_a_c_i_a_p_error.html">ACIAPError</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_a_c_i_a_p_manager.html#a25d9ce20df74626d1f47e2fa981c18a7">receiptError</a></td></tr>
<tr class="separator:a25d9ce20df74626d1f47e2fa981c18a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43587ca5062e2245698211496fc476d1" id="r_a43587ca5062e2245698211496fc476d1"><td class="memItemLeft" align="right" valign="top"><a id="a43587ca5062e2245698211496fc476d1" name="a43587ca5062e2245698211496fc476d1"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>refreshReceiptDisabled</b></td></tr>
<tr class="memdesc:a43587ca5062e2245698211496fc476d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">整个session期不进行刷新。在某些条件下防止验证刷新收据导致的不佳体验。 <br /></td></tr>
<tr class="separator:a43587ca5062e2245698211496fc476d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7ecf0bf4fea831cb8dc0bc1f7c8eb3" id="r_a0c7ecf0bf4fea831cb8dc0bc1f7c8eb3"><td class="memItemLeft" align="right" valign="top"><a id="a0c7ecf0bf4fea831cb8dc0bc1f7c8eb3" name="a0c7ecf0bf4fea831cb8dc0bc1f7c8eb3"></a>
UIRefreshReceiptAlertCompletionHandler&#160;</td><td class="memItemRight" valign="bottom"><b>refreshReceiptAlertCompletion</b></td></tr>
<tr class="memdesc:a0c7ecf0bf4fea831cb8dc0bc1f7c8eb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">提示收据刷新 <br /></td></tr>
<tr class="separator:a0c7ecf0bf4fea831cb8dc0bc1f7c8eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7339cee1f54c3f55bd20b5dbafbaab6b" id="r_a7339cee1f54c3f55bd20b5dbafbaab6b"><td class="memItemLeft" align="right" valign="top"><a id="a7339cee1f54c3f55bd20b5dbafbaab6b" name="a7339cee1f54c3f55bd20b5dbafbaab6b"></a>
id&lt; <a class="el" href="protocol_a_c_i_a_p_manager_delegate-p.html">ACIAPManagerDelegate</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>delegate</b></td></tr>
<tr class="separator:a7339cee1f54c3f55bd20b5dbafbaab6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67e673316507e5fd7536091f40daeff6" id="r_a67e673316507e5fd7536091f40daeff6"><td class="memItemLeft" align="right" valign="top"><a id="a67e673316507e5fd7536091f40daeff6" name="a67e673316507e5fd7536091f40daeff6"></a>
NSMutableDictionary *&#160;</td><td class="memItemRight" valign="bottom"><b>notifySubscriptionExpiredDic</b></td></tr>
<tr class="separator:a67e673316507e5fd7536091f40daeff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>只处理高级购买操作，包括订阅，内购，优惠券等 </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a id="a0c238cc957e56ebe3715923e2de23387" name="a0c238cc957e56ebe3715923e2de23387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c238cc957e56ebe3715923e2de23387">&#9670;&#160;</a></span>actionTitleOfProductIdentifier:actionType:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) actionTitleOfProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
        </tr>
        <tr>
          <td class="paramkey">actionType:</td>
          <td></td>
          <td class="paramtype">(IAPActionType)&#160;</td>
          <td class="paramname"><em>actionType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品购买行为 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
    <tr><td class="paramname">actionType</td><td>&lt;#actionType description#&gt; </td></tr>
  </table>
  </dd>
</dl>
<p>如果没有网络连接导致找不到产品，显示连接网络信息 没有加载到产品</p>
<p>在优惠免费期</p>
<p>已经被订阅的产品</p>
<p>已经被订阅包含的一次性购买产品</p>
<p>一次性购买产品</p>
<p>内部解锁</p>
<p>加载到产品</p>
<p>订阅产品，提示购买但已经过期, 或继续订阅</p>
<p>deprecated 订阅范畴内不可购买的产品</p>

</div>
</div>
<a id="abc16cf825e4ca8b3bfb3320e39296db6" name="abc16cf825e4ca8b3bfb3320e39296db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc16cf825e4ca8b3bfb3320e39296db6">&#9670;&#160;</a></span>dateTitleOfProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) dateTitleOfProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品过期时间 return nil 说明未获得产品使用权力，包括购买，订阅等情况 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>
<p>Debug设置productId可用的情况下，会导致和expiryDate的显示有逻辑冲突。</p>
<p>在优惠免费期</p>
<p>显示免费结束日期</p>
<p>无收据内容，无法获得过期时间</p>
<p>从收据获得过期时间，方便用户了解订阅最后日期原因</p>
<p>已经被订阅包含的一次性购买产品</p>
<p>一次性购买产品</p>
<p>内部解锁</p>

</div>
</div>
<a id="ab6efba5388f5aa1f786ab2d62b1c3cf7" name="ab6efba5388f5aa1f786ab2d62b1c3cf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6efba5388f5aa1f786ab2d62b1c3cf7">&#9670;&#160;</a></span>descOfDiscountProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) descOfDiscountProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>打折类型 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a529ebdeaf53bc401f467f3c3f1de5b9a" name="a529ebdeaf53bc401f467f3c3f1de5b9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a529ebdeaf53bc401f467f3c3f1de5b9a">&#9670;&#160;</a></span>descOfProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) descOfProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品详细说明 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acaf9ee63f2200c30eddf80b188d16cb1" name="acaf9ee63f2200c30eddf80b188d16cb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaf9ee63f2200c30eddf80b188d16cb1">&#9670;&#160;</a></span>hasAnyExpiredSubscription</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) hasAnyExpiredSubscription </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>含有任何过期的订阅 </p>
<p>暂时只有一个订阅需要处理</p>

</div>
</div>
<a id="a987fb932930eacc20f6fd5b8fd2bc4b6" name="a987fb932930eacc20f6fd5b8fd2bc4b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a987fb932930eacc20f6fd5b8fd2bc4b6">&#9670;&#160;</a></span>hasAnyProduct</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) hasAnyProduct </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>所有可解锁功能和物品 </p>

</div>
</div>
<a id="a4616476b84d8d09342957ae1c8ddeb53" name="a4616476b84d8d09342957ae1c8ddeb53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4616476b84d8d09342957ae1c8ddeb53">&#9670;&#160;</a></span>hasDiscountForProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) hasDiscountForProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品有打折 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>
<p>优先显示首次推介</p>
<p>暂时不支持打折信息</p>

</div>
</div>
<a id="af0a5c12d62f13268b072728a54361350" name="af0a5c12d62f13268b072728a54361350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0a5c12d62f13268b072728a54361350">&#9670;&#160;</a></span>isFreeOfProductId:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isFreeOfProductId: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>productIdentifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>是否免费</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">productIdentifier</td><td>&lt;#productIdentifier description#&gt;</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&lt;#return value description#&gt; </dd></dl>
<p>订阅开放</p>
<p>购买并且未为过期</p>
<p>如果过期，不考虑内部解锁</p>
<p>MARK: 内部解锁机制同时兼容旧版内购记录模式。 内部解锁在没有收据的情况下也能工作，但依赖保存在设备上的用户配置文件，应用删除后不通过内部程序恢复文件的话，无法恢复解锁状态。</p>

</div>
</div>
<a id="a60af1901b4db163874fe7019cefcc0d7" name="a60af1901b4db163874fe7019cefcc0d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60af1901b4db163874fe7019cefcc0d7">&#9670;&#160;</a></span>isFreeTrialDiscountTypeForProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isFreeTrialDiscountTypeForProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品是否免费试用 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt;</td></tr>
  </table>
  </dd>
</dl>
<p>产品是否是有N天免费使用类型的推介优惠</p><ul>
<li>Parameter identifier: &lt;#identifier description#&gt; </li>
</ul>

</div>
</div>
<a id="a65ca9c7edba89c78555c779e4a80dded" name="a65ca9c7edba89c78555c779e4a80dded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65ca9c7edba89c78555c779e4a80dded">&#9670;&#160;</a></span>isInFreeTrialDiscountForProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isInFreeTrialDiscountForProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品是否在免费试用期 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt;</td></tr>
  </table>
  </dd>
</dl>
<p>产品是否在免费试用期 测试前请在AppStoreConnect中将时间设到合适的时长，最短时长下，7天免费只有1大约分钟的时间就失效</p><ul>
<li>Parameter identifier: &lt;#identifier description#&gt; </li>
</ul>

</div>
</div>
<a id="a875caf94f586015195a6c9f56c8a6669" name="a875caf94f586015195a6c9f56c8a6669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875caf94f586015195a6c9f56c8a6669">&#9670;&#160;</a></span>isPurchasedOfProductId:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isPurchasedOfProductId: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>productIdentifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>是否购买了</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">productIdentifier</td><td>&lt;#productIdentifier description#&gt;</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&lt;#return value description#&gt; </dd></dl>

</div>
</div>
<a id="a700f8acf3730b72c4e5948174413126b" name="a700f8acf3730b72c4e5948174413126b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a700f8acf3730b72c4e5948174413126b">&#9670;&#160;</a></span>localPriceOfDiscountProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) localPriceOfDiscountProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>打折价格 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>
<p>优先显示首次推介</p>
<p>暂时不支持打折信息</p>

</div>
</div>
<a id="a6fd50d2c19722a1477c67977b2819c99" name="a6fd50d2c19722a1477c67977b2819c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fd50d2c19722a1477c67977b2819c99">&#9670;&#160;</a></span>localPriceOfProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) localPriceOfProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>本地化的价格 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2be6913a715872e80a8e422677e65598" name="a2be6913a715872e80a8e422677e65598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2be6913a715872e80a8e422677e65598">&#9670;&#160;</a></span>logTypeOfProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) logTypeOfProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>productIdentifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品类型 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">productIdentifier</td><td>&lt;#productIdentifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab1bd212c8b05d28c3985a15ee2741dac" name="ab1bd212c8b05d28c3985a15ee2741dac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1bd212c8b05d28c3985a15ee2741dac">&#9670;&#160;</a></span>productForIAPName:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable SKProduct *) productForIAPName: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>iapName</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>得到产品信息</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iapName</td><td>&lt;#iapName description#&gt;</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&lt;#return value description#&gt; </dd></dl>

</div>
</div>
<a id="a7452c0e39fbdc48352e72edaaa4237b4" name="a7452c0e39fbdc48352e72edaaa4237b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7452c0e39fbdc48352e72edaaa4237b4">&#9670;&#160;</a></span>purchaseProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) purchaseProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>productIdentifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>购买产品</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">productIdentifier</td><td>&lt;#productIdentifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa522151b938117bdced1abc023828f6f" name="aa522151b938117bdced1abc023828f6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa522151b938117bdced1abc023828f6f">&#9670;&#160;</a></span>requestProductsWithCompletionHandler:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) requestProductsWithCompletionHandler: </td>
          <td></td>
          <td class="paramtype">(RequestProductsCompletionHandler)&#160;</td>
          <td class="paramname"><em>completionHandler</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>申请产品</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">completionHandler</td><td>&lt;completionHandler description#&gt; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a09decf3e03a3a36ed9dcb341f2618693" name="a09decf3e03a3a36ed9dcb341f2618693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09decf3e03a3a36ed9dcb341f2618693">&#9670;&#160;</a></span>restorePurchase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) restorePurchase </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>回复内购 </p>

</div>
</div>
<a id="a95a97112114204de9d7ba9262cb92103" name="a95a97112114204de9d7ba9262cb92103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95a97112114204de9d7ba9262cb92103">&#9670;&#160;</a></span>titleOfDiscountProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) titleOfDiscountProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>打折标题 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>
<p>优先显示首次推介</p>
<p>暂时不支持打折信息</p>

</div>
</div>
<a id="ac5dd5613d9064c2fbc85ed47bbc5b10c" name="ac5dd5613d9064c2fbc85ed47bbc5b10c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5dd5613d9064c2fbc85ed47bbc5b10c">&#9670;&#160;</a></span>titleOfPremiumIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) titleOfPremiumIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>会员产品标题</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt; </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&lt;#return value description#&gt; </dd></dl>

</div>
</div>
<a id="a201ec5579394b773b4638e72321f755f" name="a201ec5579394b773b4638e72321f755f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a201ec5579394b773b4638e72321f755f">&#9670;&#160;</a></span>titleOfProductIdentifier:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (nullable NSString *) titleOfProductIdentifier: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>identifier</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>产品标题 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>&lt;#identifier description#&gt;</td></tr>
  </table>
  </dd>
</dl>
<p>内购产品标题 直接从skproduct取产品名，需要从apple商店验证，如果内购没上线可能获得nil </p>

</div>
</div>
<a id="afdca0c44c498f6213e2f24cf520a57af" name="afdca0c44c498f6213e2f24cf520a57af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdca0c44c498f6213e2f24cf520a57af">&#9670;&#160;</a></span>verifyReceiptCompletion:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) verifyReceiptCompletion: </td>
          <td></td>
          <td class="paramtype">(nullable void(^)(BOOL finished, NSError *error))&#160;</td>
          <td class="paramname"><em>completion</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>验证收据 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">completion</td><td>&lt;#completion description#&gt;</td></tr>
  </table>
  </dd>
</dl>
<p>验证收据 要设计好验证时机，如果收据发生不存在的情况，会弹出需要验证警告，用户体验不佳，需要避免在审核阶段被reject。 TODO: 只要在addPayment阶段标记了applicationUserName, 后期版本中随时可将每次验证receipt结果内包含的applicationUserName上传到firebase中 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">completion</td><td>&lt;#completion description#&gt; </td></tr>
  </table>
  </dd>
</dl>
<p>Apple recommends to refresh the receipt if validation fails on iOS 主动调用SKReceiptRefreshRequest导致被reject <a href="https://developer.apple.com/forums/thread/662350">https://developer.apple.com/forums/thread/662350</a> MARK: <a class="el" href="interface_m_k_store_kit.html#a4eb7fcfdbca9f1b8ec64e981210594bb">sharedKit (MKStoreKit)</a> verifyReceiptCompletion只对本地收据的内容验证，不会验证收据是否来自当前登录的appstore账号</p>
<p>如果验证失败，可能收据过期或者其他原因。询问刷新到最新收据后，会再次调用 <a class="el" href="interface_m_k_store_kit.html#a4eb7fcfdbca9f1b8ec64e981210594bb">sharedKit (MKStoreKit)</a> verifyReceiptCompletion</p>
<p>第一次安装，更新版本的时候，激活一周内不主动要求刷新收据</p>
<p>取消刷新收据，收据状态不能为success</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a25d9ce20df74626d1f47e2fa981c18a7" name="a25d9ce20df74626d1f47e2fa981c18a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d9ce20df74626d1f47e2fa981c18a7">&#9670;&#160;</a></span>receiptError</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_a_c_i_a_p_error.html">ACIAPError</a>*) receiptError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">retain</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>面向用户的收据错误信息 如果验证结束后仍然存在收据错误，则应该禁止所有内购产品的使用？ </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Shine/Shine/General/Service/AppStore/<a class="el" href="_a_c_i_a_p_manager_8h_source.html">ACIAPManager.h</a></li>
<li>Shine/Shine/General/Service/AppStore/<b>ACIAPManager.m</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
